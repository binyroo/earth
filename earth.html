<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ThreeJS로 지구를 만들자!</title>
<style type="text/css">
body{background:#000;margin:0;padding:0}
</style>
</head>
<body>

<script type="text/javascript" src="js/lib/three.js"></script>
<script type="text/javascript" src="js/lib/stats.min.js"></script>
<script type="text/javascript">

var radius = 6371;
var tilt = 0.41;

var SCREEN_WIDTH = window.innerWidth;
var SCREEN_HEIGHT = window.innerHeight;

var container, stats;
var camera, scene, renderer;
var geometry, meshPlanet;

init();
animate();


function init() {

  container = document.createElement('div');
  document.body.appendChild(container);

  camera = new THREE.PerspectiveCamera(25, SCREEN_WIDTH / SCREEN_HEIGHT, 50, 1e7);
  camera.position.z = radius * 8;

  scene = new THREE.Scene();

  geometry = new THREE.SphereGeometry(radius, 100, 50);

  meshPlanet = new THREE.Mesh(
    geometry,
    new THREE.MeshBasicMaterial({
      color: 0xff3333
    })
  );

  scene.add(meshPlanet);

  renderer = new THREE.WebGLRenderer({
    alpha: false
  });
  renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
  renderer.sortObjects = false;
  renderer.autoClear = false;

  container.appendChild(renderer.domElement);

  // 상태 모니터링 툴 추가
  stats = new Stats();
  stats.domElement.style.position = 'absolute';
  stats.domElement.style.top = '0px';
  stats.domElement.zIndex = 10000;
  container.appendChild(stats.domElement);

  window.addEventListener('resize', onWindowResize, false);
}

function onWindowResize(e) {

  SCREEN_WIDTH = window.innerWidth;
  SCREEN_HEIGHT = window.innerHeight;

  renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);

  camera.aspect = SCREEN_WIDTH / SCREEN_HEIGHT;
  camera.updateProjectionMatrix();
}

function animate() {
  requestAnimationFrame(animate);

  render();
  stats.update();
}

function render() {
  renderer.clear();
  renderer.render(scene, camera);
}
</script>

</body>
</html>
